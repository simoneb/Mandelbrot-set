{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte",
    "Options.svelte",
    "Spinner.svelte"
  ],
  "sourcesContent": [
    "<script lang=\"ts\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onMount } from \"svelte\";\nimport { generate } from \"./generate\";\nimport { Point } from \"./point\";\nimport Brightness6 from \"svelte-material-icons/Brightness6.svelte\";\nimport Options from \"./Options.svelte\";\nimport Spinner from \"./Spinner.svelte\";\nlet width = 300, height = 300, offset = new Point(0, 0), zoom = 50, zoomFactor;\n$: zoomFactor = zoom / 100;\nlet canvas;\nlet ctx;\nlet calculating = false;\nexport let version;\nlet sliderValue = 0;\nlet oldZoom;\nfunction sliderBegin() {\n    oldZoom = zoom;\n    image.src = canvas.toDataURL();\n}\nfunction sliderMove() {\n    const zoomDifference = Math.pow(2, sliderValue);\n    zoom = Number((zoomDifference * oldZoom).toFixed(1));\n    ctx.clearRect(0, 0, width, height);\n    ctx.drawImage(image, (width - width * zoomDifference) / 2, (height - height * zoomDifference) / 2, width * zoomDifference, height * zoomDifference);\n}\nfunction sliderEnd() {\n    return __awaiter(this, void 0, void 0, function* () {\n        sliderValue = 0;\n        yield drawMandelbrot();\n    });\n}\nfunction toggleLightMode() {\n    localStorage.lightMode = !document.body.classList.contains(\"light\");\n    if (localStorage.lightMode)\n        document.body.classList.toggle(\"light\");\n}\nlet mousedown = false;\nlet mouseStartingPos;\nlet image = new Image();\nlet oldOffset;\nfunction canvasDragBegin(eventOffset) {\n    mousedown = true;\n    mouseStartingPos = eventOffset;\n    image.src = canvas.toDataURL();\n    oldOffset = offset.copy();\n}\nfunction canvasDragMove(eventOffset) {\n    if (mousedown) {\n        const dragOffset = new Point(eventOffset.x - mouseStartingPos.x, eventOffset.y - mouseStartingPos.y);\n        ctx.clearRect(0, 0, width, height);\n        ctx.drawImage(image, dragOffset.x, dragOffset.y);\n        offset.x = oldOffset.x - dragOffset.x / width / zoomFactor;\n        offset.y = oldOffset.y + dragOffset.y / height / zoomFactor;\n    }\n}\nfunction canvasDragEnd(eventOffset) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (eventOffset)\n            canvasDragMove(eventOffset);\n        mousedown = false;\n        yield drawMandelbrot();\n    });\n}\nfunction canvasSwipeBegin(event) {\n    event.preventDefault();\n    canvasDragBegin(new Point(event.touches[0].clientX, event.touches[0].clientY));\n}\nfunction canvasSwipeMove(event) {\n    event.preventDefault();\n    canvasDragMove(new Point(event.touches[0].clientX, event.touches[0].clientY));\n}\nfunction canvasSwipeEnd(event) {\n    return __awaiter(this, void 0, void 0, function* () {\n        event.preventDefault();\n        yield canvasDragEnd();\n    });\n}\nfunction drawMandelbrot() {\n    return __awaiter(this, void 0, void 0, function* () {\n        calculating = true;\n        const imageDataArray = yield generate(width, height, zoomFactor, offset);\n        const imageData = new ImageData(imageDataArray, width);\n        ctx.putImageData(imageData, 0, 0);\n        calculating = false;\n    });\n}\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\n    if (localStorage.lightMode === \"true\")\n        document.body.classList.add(\"light\");\n    setTimeout(() => document.body.classList.add(\"loaded\"), 500);\n    ctx = canvas.getContext(\"2d\");\n    yield drawMandelbrot();\n}));\n</script>\n\n<style>\n\th1 {\n\t\tfont-size: 2em;\n\t\ttext-align: center;\n\t}\n\tcanvas {\n\t\tborder: 1px solid #ccc;\n\t\tmax-height: 80vh;\n\t\tmax-width: 80vw;\n\t\tcursor: grab;\n\t}\n\tcanvas:active,\n\tinput[type=\"range\"]:active {\n\t\tcursor: grabbing;\n\t}\n\t.main-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-evenly;\n\t\talign-items: center;\n\t}\n\t.container {\n\t\ttext-align: center;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\tinput[type=\"range\"] {\n\t\tpadding: 0;\n\t\tcursor: grab;\n\t}\n\t.version {\n\t\tposition: absolute;\n\t\ttop: 1em;\n\t\tleft: 1em;\n\t}\n\t.icon-container {\n\t\tposition: absolute;\n\t\tfont-size: 2em;\n\t\ttop: 0.5em;\n\t\tright: 0.5em;\n\t\tcursor: pointer;\n\t}\n\t.overlay {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.3);\n\t\tcursor: wait;\n\t}\n\t.spinner-container {\n\t\tposition: fixed;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\n\t@media (min-width: 640px) {\n\t\th1 {\n\t\t\tfont-size: 3em;\n\t\t}\n\t\t.main-container {\n\t\t\tflex-direction: row;\n\t\t}\n\t\tcanvas {\n\t\t\tmax-width: 60vw;\n\t\t}\n\t}\n</style>\n\n<h1>Mandelbrot set generator</h1>\n<span class=\"version\">{version}</span>\n<div class=\"icon-container\" on:click={toggleLightMode}>\n\t<Brightness6 />\n</div>\n<div class=\"main-container\">\n\t<div class=\"container\">\n\t\t<canvas\n\t\t\t{width}\n\t\t\t{height}\n\t\t\tbind:this={canvas}\n\t\t\ton:mousedown={(event) => canvasDragBegin(new Point(event.offsetX, event.offsetY))}\n\t\t\ton:mousemove={(event) => canvasDragMove(new Point(event.offsetX, event.offsetY))}\n\t\t\ton:mouseup={(event) => canvasDragEnd(new Point(event.offsetX, event.offsetY))}\n\t\t\ton:touchstart={canvasSwipeBegin}\n\t\t\ton:touchmove={canvasSwipeMove}\n\t\t\ton:touchend={canvasSwipeEnd} />\n\t\t<input\n\t\t\ttype=\"range\"\n\t\t\tmin=\"-1\"\n\t\t\tmax=\"1\"\n\t\t\tstep=\"0.01\"\n\t\t\tbind:value={sliderValue}\n\t\t\ton:mousedown={sliderBegin}\n\t\t\ton:touchstart={sliderBegin}\n\t\t\ton:input={sliderMove}\n\t\t\ton:change={sliderEnd} />\n\t</div>\n\t<Options\n\t\tbind:width\n\t\tbind:height\n\t\tbind:offset\n\t\tbind:zoom\n\t\ton:update={drawMandelbrot} />\n</div>\n{#if calculating}\n\t<div class=\"overlay\">\n\t\t<div class=\"spinner-container\">\n\t\t\t<Spinner lightMode={localStorage.lightMode === 'true'} />\n\t\t</div>\n\t</div>\n{/if}\n",
    "<script lang=\"ts\">;\nimport { createEventDispatcher } from \"svelte\";\nlet dispatch = createEventDispatcher();\nfunction update(event) {\n    event.preventDefault();\n    dispatch(\"update\");\n}\nexport let width, height, offset, zoom;\n</script>\n\n<style>\n    h2 {\n        font-size: 1.3em;\n        margin-bottom: 0.3em;\n    }\n    form {\n        text-align: center;\n    }\n    input {\n        width: 5em;\n    }\n    .container div:first-of-type h2 {\n        margin-top: 0;\n    }\n    input[type=\"submit\"] {\n        margin-top: 1em;\n    }\n\n    /* Remove arrow button from number input */\n    input::-webkit-outer-spin-button,\n    input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    input[type=\"number\"] {\n        -moz-appearance: textfield;\n    }\n\n    @media (min-width: 640px) {\n        h2 {\n            font-size: 1.7em;\n        }\n    }\n</style>\n\n<form on:submit={update}>\n    <div>\n        <h2>Center position</h2>\n        (<input type=\"number\" step=\"any\" bind:value={offset.x} />,\n        <input type=\"number\" step=\"any\" bind:value={offset.y} />)\n    </div>\n    <div>\n        <h2>Zoom</h2>\n        <input type=\"number\" step=\"0.1\" bind:value={zoom} />%\n    </div>\n    <div>\n        <h2>Canvas size</h2>\n        <input type=\"number\" bind:value={width} />\n        &times;\n        <input type=\"number\" bind:value={height} />\n    </div>\n    <input type=\"submit\" value=\"Update\" />\n</form>\n",
    "<script lang=\"ts\">export let lightMode = false;\n</script>\n<style>\n    @keyframes rotate {\n        from {\n            transform: rotate(0deg);\n        }\n        to {\n            transform: rotate(360deg);\n        }\n    }\n    div{\n        width: 2em;\n        height: 2em;\n        border-radius: 50%;\n        border: 7px solid var(--color);\n        border-top: 7px solid transparent;\n        animation: rotate infinite 2s linear;\n    }\n</style>\n<div style={`--color: ${lightMode ? \"#333\" : \"#ccc\"}`} />"
  ],
  "names": [],
  "mappings": "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"
}
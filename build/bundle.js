var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function a(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t){return""===t?null:+t}function v(t,e){t.value=null==e?"":e}let g;function $(t){g=t}function w(){if(!g)throw new Error("Function called outside component initialization");return g}function y(){const t=w();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,i)}))}}}const x=[],b=[],_=[],k=[],L=Promise.resolve();let M=!1;function j(t){_.push(t)}function z(t){k.push(t)}let E=!1;const q=new Set;function C(){if(!E){E=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];$(e),B(e.$$)}for($(null),x.length=0;b.length;)b.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];q.has(e)||(q.add(e),e())}_.length=0}while(x.length);for(;k.length;)k.pop()();M=!1,E=!1,q.clear()}}function B(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const D=new Set;let S;function A(t,e){t&&t.i&&(D.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),S.c.push((()=>{D.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function W(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function I(t){t&&t.c()}function V(t,n,s){const{fragment:c,on_mount:u,on_destroy:r,after_update:l}=t.$$;c&&c.m(n,s),j((()=>{const n=u.map(e).filter(i);r?r.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(j)}function X(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&(x.push(t),M||(M=!0,L.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,i,s,c,u,l,a=[-1]){const f=g;$(e);const h=i.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let m=!1;if(d.ctx=s?s(e,h,((t,n,...o)=>{const i=o.length?o[0]:n;return d.ctx&&u(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),m&&Y(e,t)),n})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);d.fragment&&d.fragment.l(t),t.forEach(r)}else d.fragment&&d.fragment.c();i.intro&&A(e.$$.fragment),V(e,i.target,i.anchor),C()}$(f)}class R{$destroy(){X(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class O{constructor(){this.worker=new Worker("build/worker.js")}async sendWasm(){await this.command("loadWasm",await O.getWasm())}command(t,e){return new Promise(((n,o)=>{this.worker.onmessage=t=>n(t.data),this.worker.postMessage({action:t,data:e})}))}static async getWasm(){if(void 0===O.wasm){const t=await fetch("build/generate.wasm");O.wasm=await t.arrayBuffer()}return O.wasm}terminate(){this.worker.terminate()}}class P{constructor(t,e){this.x=t,this.y=e}copy(){return new P(this.x,this.y)}}function T(e){let n,o;return{c(){n=a("svg"),o=a("path"),m(o,"d","M12,18V6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,15.31L23.31,12L20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31Z"),m(o,"fill",e[2]),m(n,"width",e[0]),m(n,"height",e[1]),m(n,"viewBox",e[3])},m(t,e){u(t,n,e),c(n,o)},p(t,[e]){4&e&&m(o,"fill",t[2]),1&e&&m(n,"width",t[0]),2&e&&m(n,"height",t[1]),8&e&&m(n,"viewBox",t[3])},i:t,o:t,d(t){t&&r(n)}}}function U(t,e,n){let{size:o="1em"}=e,{width:i=o}=e,{height:s=o}=e,{color:c="currentColor"}=e,{viewBox:u="0 0 24 24"}=e;return t.$$set=t=>{"size"in t&&n(4,o=t.size),"width"in t&&n(0,i=t.width),"height"in t&&n(1,s=t.height),"color"in t&&n(2,c=t.color),"viewBox"in t&&n(3,u=t.viewBox)},[i,s,c,u,o]}class F extends R{constructor(t){super(),H(this,t,U,T,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Z(e){let n,i,s,a,g,$,w,y,x,b,_,k,L,M,j,z,E,q,C,B,D,S,A,N,W;return{c(){n=l("form"),i=l("div"),s=l("h2"),s.textContent="Center position",a=f("\n        ("),g=l("input"),$=f(",\n        "),w=l("input"),y=f(")"),x=h(),b=l("div"),_=l("h2"),_.textContent="Zoom",k=h(),L=l("input"),M=f("%"),j=h(),z=l("div"),E=l("h2"),E.textContent="Canvas size",q=h(),C=l("input"),B=f("\n        Ã—\n        "),D=l("input"),S=h(),A=l("input"),m(s,"class","svelte-1831lhm"),m(g,"type","number"),m(g,"step","any"),m(g,"class","svelte-1831lhm"),m(w,"type","number"),m(w,"step","any"),m(w,"class","svelte-1831lhm"),m(i,"class","svelte-1831lhm"),m(_,"class","svelte-1831lhm"),m(L,"type","number"),m(L,"step","0.1"),m(L,"class","svelte-1831lhm"),m(b,"class","svelte-1831lhm"),m(E,"class","svelte-1831lhm"),m(C,"type","number"),m(C,"class","svelte-1831lhm"),m(D,"type","number"),m(D,"class","svelte-1831lhm"),m(z,"class","svelte-1831lhm"),m(A,"type","submit"),A.value="Update",m(A,"class","svelte-1831lhm"),m(n,"class","svelte-1831lhm")},m(t,o){u(t,n,o),c(n,i),c(i,s),c(i,a),c(i,g),v(g,e[2].x),c(i,$),c(i,w),v(w,e[2].y),c(i,y),c(n,x),c(n,b),c(b,_),c(b,k),c(b,L),v(L,e[3]),c(b,M),c(n,j),c(n,z),c(z,E),c(z,q),c(z,C),v(C,e[0]),c(z,B),c(z,D),v(D,e[1]),c(n,S),c(n,A),N||(W=[d(g,"input",e[5]),d(w,"input",e[6]),d(L,"input",e[7]),d(C,"input",e[8]),d(D,"input",e[9]),d(n,"submit",e[4])],N=!0)},p(t,[e]){4&e&&p(g.value)!==t[2].x&&v(g,t[2].x),4&e&&p(w.value)!==t[2].y&&v(w,t[2].y),8&e&&p(L.value)!==t[3]&&v(L,t[3]),1&e&&p(C.value)!==t[0]&&v(C,t[0]),2&e&&p(D.value)!==t[1]&&v(D,t[1])},i:t,o:t,d(t){t&&r(n),N=!1,o(W)}}}function G(t,e,n){let o=y();let{width:i}=e,{height:s}=e,{offset:c}=e,{zoom:u}=e;return t.$$set=t=>{"width"in t&&n(0,i=t.width),"height"in t&&n(1,s=t.height),"offset"in t&&n(2,c=t.offset),"zoom"in t&&n(3,u=t.zoom)},[i,s,c,u,function(t){t.preventDefault(),o("update")},function(){c.x=p(this.value),n(2,c)},function(){c.y=p(this.value),n(2,c)},function(){u=p(this.value),n(3,u)},function(){i=p(this.value),n(0,i)},function(){s=p(this.value),n(1,s)}]}class J extends R{constructor(t){super(),H(this,t,G,Z,s,{width:0,height:1,offset:2,zoom:3})}}function K(e){let n,o;return{c(){n=l("div"),m(n,"style",o="--color: "+(e[0]?"#333":"#ccc")),m(n,"class","svelte-ghrpqq")},m(t,e){u(t,n,e)},p(t,[e]){1&e&&o!==(o="--color: "+(t[0]?"#333":"#ccc"))&&m(n,"style",o)},i:t,o:t,d(t){t&&r(n)}}}function Q(t,e,n){let{lightMode:o=!1}=e;return t.$$set=t=>{"lightMode"in t&&n(0,o=t.lightMode)},[o]}class tt extends R{constructor(t){super(),H(this,t,Q,K,s,{lightMode:0})}}function et(e){let n,o,i,s;return i=new tt({props:{lightMode:"true"===localStorage.lightMode}}),{c(){n=l("div"),o=l("div"),I(i.$$.fragment),m(o,"class","spinner-container svelte-1j72xq8"),m(n,"class","overlay svelte-1j72xq8")},m(t,e){u(t,n,e),c(n,o),V(i,o,null),s=!0},p:t,i(t){s||(A(i.$$.fragment,t),s=!0)},o(t){N(i.$$.fragment,t),s=!1},d(t){t&&r(n),X(i)}}}function nt(t){let e,n,i,s,a,p,g,$,w,y,x,_,k,L,M,j,E,q,C,B,D,Y,H,R;function O(e){t[23].call(null,e)}function P(e){t[24].call(null,e)}function T(e){t[25].call(null,e)}function U(e){t[26].call(null,e)}g=new F({});let Z={};void 0!==t[1]&&(Z.width=t[1]),void 0!==t[2]&&(Z.height=t[2]),void 0!==t[3]&&(Z.offset=t[3]),void 0!==t[4]&&(Z.zoom=t[4]),M=new J({props:Z}),b.push((()=>W(M,"width",O))),b.push((()=>W(M,"height",P))),b.push((()=>W(M,"offset",T))),b.push((()=>W(M,"zoom",U))),M.$on("update",t[17]);let G=t[6]&&et();return{c(){e=l("h1"),e.textContent="Mandelbrot set generator",n=h(),i=l("span"),s=f(t[0]),a=h(),p=l("div"),I(g.$$.fragment),$=h(),w=l("div"),y=l("div"),x=l("canvas"),_=h(),k=l("input"),L=h(),I(M.$$.fragment),B=h(),G&&G.c(),D=f(""),m(e,"class","svelte-1j72xq8"),m(i,"class","version svelte-1j72xq8"),m(p,"class","icon-container svelte-1j72xq8"),m(x,"width",t[1]),m(x,"height",t[2]),m(x,"class","svelte-1j72xq8"),m(k,"type","range"),m(k,"min","-1"),m(k,"max","1"),m(k,"step","0.01"),m(k,"class","svelte-1j72xq8"),m(y,"class","container svelte-1j72xq8"),m(w,"class","main-container svelte-1j72xq8")},m(o,r){u(o,e,r),u(o,n,r),u(o,i,r),c(i,s),u(o,a,r),u(o,p,r),V(g,p,null),u(o,$,r),u(o,w,r),c(w,y),c(y,x),t[18](x),c(y,_),c(y,k),v(k,t[7]),c(w,L),V(M,w,null),u(o,B,r),G&&G.m(o,r),u(o,D,r),Y=!0,H||(R=[d(p,"click",ot),d(x,"mousedown",t[19]),d(x,"mousemove",t[20]),d(x,"mouseup",t[21]),d(x,"touchstart",t[14]),d(x,"touchmove",t[15]),d(x,"touchend",t[16]),d(k,"change",t[22]),d(k,"input",t[22]),d(k,"mousedown",t[8]),d(k,"touchstart",t[8],{passive:!0}),d(k,"input",t[9]),d(k,"change",t[10])],H=!0)},p(t,e){(!Y||1&e[0])&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(s,t[0]),(!Y||2&e[0])&&m(x,"width",t[1]),(!Y||4&e[0])&&m(x,"height",t[2]),128&e[0]&&v(k,t[7]);const n={};!j&&2&e[0]&&(j=!0,n.width=t[1],z((()=>j=!1))),!E&&4&e[0]&&(E=!0,n.height=t[2],z((()=>E=!1))),!q&&8&e[0]&&(q=!0,n.offset=t[3],z((()=>q=!1))),!C&&16&e[0]&&(C=!0,n.zoom=t[4],z((()=>C=!1))),M.$set(n),t[6]?G?(G.p(t,e),64&e[0]&&A(G,1)):(G=et(),G.c(),A(G,1),G.m(D.parentNode,D)):G&&(S={r:0,c:[],p:S},N(G,1,1,(()=>{G=null})),S.r||o(S.c),S=S.p)},i(t){Y||(A(g.$$.fragment,t),A(M.$$.fragment,t),A(G),Y=!0)},o(t){N(g.$$.fragment,t),N(M.$$.fragment,t),N(G),Y=!1},d(s){s&&r(e),s&&r(n),s&&r(i),s&&r(a),s&&r(p),X(g),s&&r($),s&&r(w),t[18](null),X(M),s&&r(B),G&&G.d(s),s&&r(D),H=!1,o(R)}}}function ot(){localStorage.lightMode=!document.body.classList.contains("light"),localStorage.lightMode&&document.body.classList.toggle("light")}function it(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function c(t){try{r(o.next(t))}catch(t){s(t)}}function u(t){try{r(o.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,u)}r((o=o.apply(t,e||[])).next())}))};let i,s,c,u,r=300,l=300,a=new P(0,0),f=50,h=!1,{version:d}=e,m=0;let v,g,$=!1,y=new Image;function x(t){$=!0,v=t,y.src=s.toDataURL(),g=a.copy()}function _(t){if($){const e=new P(t.x-v.x,t.y-v.y);c.clearRect(0,0,r,l),c.drawImage(y,e.x,e.y),n(3,a.x=g.x-e.x/r/i,a),n(3,a.y=g.y+e.y/l/i,a)}}function k(t){return o(this,void 0,void 0,(function*(){t&&_(t),$=!1,yield L()}))}function L(){return o(this,void 0,void 0,(function*(){n(6,h=!0);const t=yield async function(t,e,n,o){const i=new O;await i.sendWasm();const s=await i.command("generate",[t,e,n,o.x,o.y]);return i.terminate(),s}(r,l,i,a),e=new ImageData(t,r);c.putImageData(e,0,0),n(6,h=!1)}))}var M;M=()=>o(void 0,void 0,void 0,(function*(){"true"===localStorage.lightMode&&document.body.classList.add("light"),setTimeout((()=>document.body.classList.add("loaded")),500),c=s.getContext("2d"),yield L()})),w().$$.on_mount.push(M);return t.$$set=t=>{"version"in t&&n(0,d=t.version)},t.$$.update=()=>{16&t.$$.dirty[0]&&(i=f/100)},[d,r,l,a,f,s,h,m,function(){u=f,y.src=s.toDataURL()},function(){const t=Math.pow(2,m);n(4,f=Number((t*u).toFixed(1))),c.clearRect(0,0,r,l),c.drawImage(y,(r-r*t)/2,(l-l*t)/2,r*t,l*t)},function(){return o(this,void 0,void 0,(function*(){n(7,m=0),yield L()}))},x,_,k,function(t){t.preventDefault(),x(new P(t.touches[0].clientX,t.touches[0].clientY))},function(t){t.preventDefault(),_(new P(t.touches[0].clientX,t.touches[0].clientY))},function(t){return o(this,void 0,void 0,(function*(){t.preventDefault(),yield k()}))},L,function(t){b[t?"unshift":"push"]((()=>{s=t,n(5,s)}))},t=>x(new P(t.offsetX,t.offsetY)),t=>_(new P(t.offsetX,t.offsetY)),t=>k(new P(t.offsetX,t.offsetY)),function(){m=p(this.value),n(7,m)},function(t){r=t,n(1,r)},function(t){l=t,n(2,l)},function(t){a=t,n(3,a)},function(t){f=t,n(4,f)}]}return new class extends R{constructor(t){super(),H(this,t,it,nt,s,{version:0},[-1,-1])}}({target:document.body,props:{version:"v1.0.0"}})}();
//# sourceMappingURL=bundle.js.map

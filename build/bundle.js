var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function a(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t){return""===t?null:+t}function m(t,e){t.value=null==e?"":e}let g;function $(t){g=t}function w(){if(!g)throw new Error("Function called outside component initialization");return g}function y(){const t=w();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,i)}))}}}const x=[],_=[],b=[],k=[],L=Promise.resolve();let C=!1;function M(t){b.push(t)}function j(t){k.push(t)}let z=!1;const E=new Set;function q(){if(!z){z=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];$(e),B(e.$$)}for($(null),x.length=0;_.length;)_.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];E.has(e)||(E.add(e),e())}b.length=0}while(x.length);for(;k.length;)k.pop()();C=!1,z=!1,E.clear()}}function B(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const D=new Set;let S;function A(t,e){t&&t.i&&(D.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),S.c.push((()=>{D.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function W(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function I(t){t&&t.c()}function O(t,n,s){const{fragment:c,on_mount:u,on_destroy:r,after_update:l}=t.$$;c&&c.m(n,s),M((()=>{const n=u.map(e).filter(i);r?r.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(M)}function V(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(x.push(t),C||(C=!0,L.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,i,s,c,u,l,a=[-1]){const h=g;$(e);const f=i.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let p=!1;if(d.ctx=s?s(e,f,((t,n,...o)=>{const i=o.length?o[0]:n;return d.ctx&&u(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),p&&X(e,t)),n})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);d.fragment&&d.fragment.l(t),t.forEach(r)}else d.fragment&&d.fragment.c();i.intro&&A(e.$$.fragment),O(e,i.target,i.anchor),q()}$(h)}class H{$destroy(){V(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class R{constructor(){this.worker=new Worker("build/worker.js")}async sendWasm(){await this.command("loadWasm",await R.getWasm())}command(t,e){return new Promise(((n,o)=>{this.worker.onmessage=t=>n(t.data),this.worker.postMessage({action:t,data:e})}))}static async getWasm(){if(void 0===R.wasm){const t=await fetch("build/generate.wasm");R.wasm=await t.arrayBuffer()}return R.wasm}terminate(){this.worker.terminate()}}class P{constructor(t,e){this.x=t,this.y=e}copy(){return new P(this.x,this.y)}}function T(e){let n,o;return{c(){n=a("svg"),o=a("path"),p(o,"d","M12,18V6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,15.31L23.31,12L20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31Z"),p(o,"fill",e[2]),p(n,"width",e[0]),p(n,"height",e[1]),p(n,"viewBox",e[3])},m(t,e){u(t,n,e),c(n,o)},p(t,[e]){4&e&&p(o,"fill",t[2]),1&e&&p(n,"width",t[0]),2&e&&p(n,"height",t[1]),8&e&&p(n,"viewBox",t[3])},i:t,o:t,d(t){t&&r(n)}}}function U(t,e,n){let{size:o="1em"}=e,{width:i=o}=e,{height:s=o}=e,{color:c="currentColor"}=e,{viewBox:u="0 0 24 24"}=e;return t.$$set=t=>{"size"in t&&n(4,o=t.size),"width"in t&&n(0,i=t.width),"height"in t&&n(1,s=t.height),"color"in t&&n(2,c=t.color),"viewBox"in t&&n(3,u=t.viewBox)},[i,s,c,u,o]}class F extends H{constructor(t){super(),Y(this,t,U,T,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Z(e){let n,i,s,a,g,$,w,y,x,_,b,k,L,C,M,j,z,E,q,B,D,S,A,N,W,I,O,V,X,Y,H,R,P,T,U,F;return{c(){n=l("form"),i=l("div"),s=l("h2"),s.textContent="Center position",a=h("\n        ("),g=l("input"),$=h(",\n        "),w=l("input"),y=h(")"),x=f(),_=l("div"),b=l("h2"),b.textContent="Zoom",k=f(),L=l("input"),C=h("%"),M=f(),j=l("div"),z=l("h2"),z.textContent="Canvas size",E=f(),q=l("input"),B=h("\n        Ã—\n        "),D=l("input"),S=f(),A=l("div"),N=l("h2"),N.textContent="Color",W=f(),I=l("label"),O=l("input"),V=h("\n            Color"),X=f(),Y=l("label"),H=l("input"),R=h("\n            Black & white"),P=f(),T=l("input"),p(s,"class","svelte-pnhho6"),p(g,"type","number"),p(g,"step","any"),p(g,"class","svelte-pnhho6"),p(w,"type","number"),p(w,"step","any"),p(w,"class","svelte-pnhho6"),p(i,"class","svelte-pnhho6"),p(b,"class","svelte-pnhho6"),p(L,"type","number"),p(L,"step","0.1"),p(L,"class","svelte-pnhho6"),p(_,"class","svelte-pnhho6"),p(z,"class","svelte-pnhho6"),p(q,"type","number"),p(q,"class","svelte-pnhho6"),p(D,"type","number"),p(D,"class","svelte-pnhho6"),p(j,"class","svelte-pnhho6"),p(N,"class","svelte-pnhho6"),p(O,"type","radio"),O.__value="true",O.value=O.__value,p(O,"class","svelte-pnhho6"),e[13][0].push(O),p(I,"class","svelte-pnhho6"),p(H,"type","radio"),H.__value="false",H.value=H.__value,p(H,"class","svelte-pnhho6"),e[13][0].push(H),p(Y,"class","svelte-pnhho6"),p(A,"class","color-container svelte-pnhho6"),p(T,"type","submit"),T.value="Update",p(T,"class","svelte-pnhho6"),p(n,"class","svelte-pnhho6")},m(t,o){u(t,n,o),c(n,i),c(i,s),c(i,a),c(i,g),m(g,e[2].x),c(i,$),c(i,w),m(w,e[2].y),c(i,y),c(n,x),c(n,_),c(_,b),c(_,k),c(_,L),m(L,e[3]),c(_,C),c(n,M),c(n,j),c(j,z),c(j,E),c(j,q),m(q,e[0]),c(j,B),c(j,D),m(D,e[1]),c(n,S),c(n,A),c(A,N),c(A,W),c(A,I),c(I,O),O.checked=O.__value===e[4],c(I,V),c(A,X),c(A,Y),c(Y,H),H.checked=H.__value===e[4],c(Y,R),c(n,P),c(n,T),U||(F=[d(g,"input",e[7]),d(w,"input",e[8]),d(L,"input",e[9]),d(q,"input",e[10]),d(D,"input",e[11]),d(O,"change",e[12]),d(H,"change",e[14]),d(n,"submit",e[5])],U=!0)},p(t,[e]){4&e&&v(g.value)!==t[2].x&&m(g,t[2].x),4&e&&v(w.value)!==t[2].y&&m(w,t[2].y),8&e&&v(L.value)!==t[3]&&m(L,t[3]),1&e&&v(q.value)!==t[0]&&m(q,t[0]),2&e&&v(D.value)!==t[1]&&m(D,t[1]),16&e&&(O.checked=O.__value===t[4]),16&e&&(H.checked=H.__value===t[4])},i:t,o:t,d(t){t&&r(n),e[13][0].splice(e[13][0].indexOf(O),1),e[13][0].splice(e[13][0].indexOf(H),1),U=!1,o(F)}}}function G(t,e,n){let o=y();let{width:i}=e,{height:s}=e,{offset:c}=e,{zoom:u}=e,{color:r}=e,l="true";return t.$$set=t=>{"width"in t&&n(0,i=t.width),"height"in t&&n(1,s=t.height),"offset"in t&&n(2,c=t.offset),"zoom"in t&&n(3,u=t.zoom),"color"in t&&n(6,r=t.color)},t.$$.update=()=>{16&t.$$.dirty&&n(6,r="true"===l)},[i,s,c,u,l,function(t){t.preventDefault(),o("update")},r,function(){c.x=v(this.value),n(2,c)},function(){c.y=v(this.value),n(2,c)},function(){u=v(this.value),n(3,u)},function(){i=v(this.value),n(0,i)},function(){s=v(this.value),n(1,s)},function(){l=this.__value,n(4,l)},[[]],function(){l=this.__value,n(4,l)}]}class J extends H{constructor(t){super(),Y(this,t,G,Z,s,{width:0,height:1,offset:2,zoom:3,color:6})}}function K(e){let n,o;return{c(){n=l("div"),p(n,"style",o="--color: "+(e[0]?"#333":"#ccc")),p(n,"class","svelte-ghrpqq")},m(t,e){u(t,n,e)},p(t,[e]){1&e&&o!==(o="--color: "+(t[0]?"#333":"#ccc"))&&p(n,"style",o)},i:t,o:t,d(t){t&&r(n)}}}function Q(t,e,n){let{lightMode:o=!1}=e;return t.$$set=t=>{"lightMode"in t&&n(0,o=t.lightMode)},[o]}class tt extends H{constructor(t){super(),Y(this,t,Q,K,s,{lightMode:0})}}function et(e){let n,o,i,s;return i=new tt({props:{lightMode:"true"===localStorage.lightMode}}),{c(){n=l("div"),o=l("div"),I(i.$$.fragment),p(o,"class","spinner-container svelte-1j72xq8"),p(n,"class","overlay svelte-1j72xq8")},m(t,e){u(t,n,e),c(n,o),O(i,o,null),s=!0},p:t,i(t){s||(A(i.$$.fragment,t),s=!0)},o(t){N(i.$$.fragment,t),s=!1},d(t){t&&r(n),V(i)}}}function nt(t){let e,n,i,s,a,v,g,$,w,y,x,b,k,L,C,M,z,E,q,B,D,X,Y,H,R;function P(e){t[24].call(null,e)}function T(e){t[25].call(null,e)}function U(e){t[26].call(null,e)}function Z(e){t[27].call(null,e)}function G(e){t[28].call(null,e)}g=new F({});let K={};void 0!==t[2]&&(K.width=t[2]),void 0!==t[3]&&(K.height=t[3]),void 0!==t[4]&&(K.offset=t[4]),void 0!==t[1]&&(K.zoom=t[1]),void 0!==t[5]&&(K.color=t[5]),C=new J({props:K}),_.push((()=>W(C,"width",P))),_.push((()=>W(C,"height",T))),_.push((()=>W(C,"offset",U))),_.push((()=>W(C,"zoom",Z))),_.push((()=>W(C,"color",G))),C.$on("update",t[18]);let Q=t[7]&&et();return{c(){e=l("h1"),e.textContent="Mandelbrot set generator",n=f(),i=l("span"),s=h(t[0]),a=f(),v=l("div"),I(g.$$.fragment),$=f(),w=l("div"),y=l("div"),x=l("canvas"),b=f(),k=l("input"),L=f(),I(C.$$.fragment),D=f(),Q&&Q.c(),X=h(""),p(e,"class","svelte-1j72xq8"),p(i,"class","version svelte-1j72xq8"),p(v,"class","icon-container svelte-1j72xq8"),p(x,"width",t[2]),p(x,"height",t[3]),p(x,"class","svelte-1j72xq8"),p(k,"type","range"),p(k,"min","-1"),p(k,"max","1"),p(k,"step","0.01"),p(k,"class","svelte-1j72xq8"),p(y,"class","container svelte-1j72xq8"),p(w,"class","main-container svelte-1j72xq8")},m(o,r){u(o,e,r),u(o,n,r),u(o,i,r),c(i,s),u(o,a,r),u(o,v,r),O(g,v,null),u(o,$,r),u(o,w,r),c(w,y),c(y,x),t[19](x),c(y,b),c(y,k),m(k,t[8]),c(w,L),O(C,w,null),u(o,D,r),Q&&Q.m(o,r),u(o,X,r),Y=!0,H||(R=[d(v,"click",ot),d(x,"mousedown",t[20]),d(x,"mousemove",t[21]),d(x,"mouseup",t[22]),d(x,"touchstart",t[15]),d(x,"touchmove",t[16]),d(x,"touchend",t[17]),d(k,"change",t[23]),d(k,"input",t[23]),d(k,"mousedown",t[9]),d(k,"touchstart",t[9],{passive:!0}),d(k,"input",t[10]),d(k,"change",t[11])],H=!0)},p(t,e){(!Y||1&e[0])&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(s,t[0]),(!Y||4&e[0])&&p(x,"width",t[2]),(!Y||8&e[0])&&p(x,"height",t[3]),256&e[0]&&m(k,t[8]);const n={};!M&&4&e[0]&&(M=!0,n.width=t[2],j((()=>M=!1))),!z&&8&e[0]&&(z=!0,n.height=t[3],j((()=>z=!1))),!E&&16&e[0]&&(E=!0,n.offset=t[4],j((()=>E=!1))),!q&&2&e[0]&&(q=!0,n.zoom=t[1],j((()=>q=!1))),!B&&32&e[0]&&(B=!0,n.color=t[5],j((()=>B=!1))),C.$set(n),t[7]?Q?(Q.p(t,e),128&e[0]&&A(Q,1)):(Q=et(),Q.c(),A(Q,1),Q.m(X.parentNode,X)):Q&&(S={r:0,c:[],p:S},N(Q,1,1,(()=>{Q=null})),S.r||o(S.c),S=S.p)},i(t){Y||(A(g.$$.fragment,t),A(C.$$.fragment,t),A(Q),Y=!0)},o(t){N(g.$$.fragment,t),N(C.$$.fragment,t),N(Q),Y=!1},d(s){s&&r(e),s&&r(n),s&&r(i),s&&r(a),s&&r(v),V(g),s&&r($),s&&r(w),t[19](null),V(C),s&&r(D),Q&&Q.d(s),s&&r(X),H=!1,o(R)}}}function ot(){localStorage.lightMode=!document.body.classList.contains("light"),localStorage.lightMode&&document.body.classList.toggle("light")}function it(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function c(t){try{r(o.next(t))}catch(t){s(t)}}function u(t){try{r(o.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,u)}r((o=o.apply(t,e||[])).next())}))};let i,s,c,u,r,l=300,a=300,h=new P(0,0),f=50,d=!1,{version:p}=e,m=0;let g,$,y=!1,x=new Image;function b(t){y=!0,g=t,x.src=c.toDataURL(),$=h.copy()}function k(t){if(y){const e=new P(t.x-g.x,t.y-g.y);u.clearRect(0,0,l,a),u.drawImage(x,e.x,e.y),n(4,h.x=$.x-e.x/l/i,h),n(4,h.y=$.y+e.y/a/i,h)}}function L(t){return o(this,void 0,void 0,(function*(){t&&k(t),y=!1,yield C()}))}function C(){return o(this,void 0,void 0,(function*(){n(7,d=!0);const t=yield async function(t,e,n,o,i){const s=new R;await s.sendWasm();const c=await s.command("generate",[t,e,n,o.x,o.y,i]);return s.terminate(),c}(l,a,i,h,s),e=new ImageData(t,l);u.putImageData(e,0,0),n(7,d=!1)}))}var M;M=()=>o(void 0,void 0,void 0,(function*(){"true"===localStorage.lightMode&&document.body.classList.add("light"),setTimeout((()=>document.body.classList.add("loaded")),500),u=c.getContext("2d"),yield C()})),w().$$.on_mount.push(M);return t.$$set=t=>{"version"in t&&n(0,p=t.version)},t.$$.update=()=>{2&t.$$.dirty[0]&&(i=f/100)},[p,f,l,a,h,s,c,d,m,function(){r=f,x.src=c.toDataURL()},function(){const t=Math.pow(2,m);n(1,f=Number((t*r).toFixed(1))),u.clearRect(0,0,l,a),u.drawImage(x,(l-l*t)/2,(a-a*t)/2,l*t,a*t)},function(){return o(this,void 0,void 0,(function*(){n(8,m=0),yield C()}))},b,k,L,function(t){t.preventDefault(),b(new P(t.touches[0].clientX,t.touches[0].clientY))},function(t){t.preventDefault(),k(new P(t.touches[0].clientX,t.touches[0].clientY))},function(t){return o(this,void 0,void 0,(function*(){t.preventDefault(),yield L()}))},C,function(t){_[t?"unshift":"push"]((()=>{c=t,n(6,c)}))},t=>b(new P(t.offsetX,t.offsetY)),t=>k(new P(t.offsetX,t.offsetY)),t=>L(new P(t.offsetX,t.offsetY)),function(){m=v(this.value),n(8,m)},function(t){l=t,n(2,l)},function(t){a=t,n(3,a)},function(t){h=t,n(4,h)},function(t){f=t,n(1,f)},function(t){s=t,n(5,s)}]}return new class extends H{constructor(t){super(),Y(this,t,it,nt,s,{version:0},[-1,-1])}}({target:document.body,props:{version:"v1.1.0"}})}();
//# sourceMappingURL=bundle.js.map
